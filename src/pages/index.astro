---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../config";

const posts = (await Astro.glob("./blog/*.md")).sort(
  (a: any, b: any) =>
    new Date(a.frontmatter.pubDate).valueOf() -
    new Date(b.frontmatter.pubDate).valueOf()
);
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header title={SITE_TITLE} />
    <main>
      <h1>Hello!</h1>
      <p>
        Welcome to the official <a href="https://astro.build/">Astro</a> blog starter
        template. This template serves as a lightweight, minimally-styled starting
        point for anyone looking to build a personal website, blog, or portfolio
        with Astro.
      </p>
      <p>
        This template comes with a few integrations already configured in your
        <code>astro.config.mjs</code> file. You can customize your setup with
        <a href="https://astro.build/integrations">Astro Integrations</a> to add
        tools like Tailwind, React, or Vue to your project.
      </p>
      <p>Here are a few ideas on how to get started with the template:</p>
      <ul>
        {
          posts
            .slice(-5)
            .reverse()
            .map((post) => (
              <li>
                <div class="post">
                  <div>
                    <a href={post.url}>{post.frontmatter.title}</a>
                  </div>
                  <code class="post-date hidden-mobile">
                    <time datetime={post.frontmatter.pubDate}>
                      {new Date(post.frontmatter.pubDate).toLocaleDateString(
                        "en-gb",
                        { year: "numeric", month: "short", day: "numeric" }
                      )}
                    </time>
                  </code>
                </div>
                {post.frontmatter.description && (
                  <div class="post-description nowrap">
                    {post.frontmatter.description}
                  </div>
                )}
              </li>
            ))
        }
      </ul>
      <p>
        You can browse all blog posts in the
        <a href="/blog">archive</a>.<!--, or sort by tag.-->
      </p>
      <p>
        Have fun! If you get stuck, remember to
        <a href="https://docs.astro.build/">read the docs</a>
        or <a href="https://astro.build/chat">join us on Discord</a> to ask questions.
      </p>
      <p>
        Looking for a blog template with a bit more personality? Check out
        <a href="https://github.com/Charca/astro-blog-template">
          astro-blog-template
        </a> by
        <a href="https://twitter.com/Charca">Maxi Ferreira</a>.
      </p>
    </main>
    <Footer />
    <style>
      .post {
        display: flex;
        flex-flow: row nowrap;
        gap: 4px;
        margin: 2px 0;
      }
      .post-description {
        color: #5a6988;
        opacity: 70;
        font-style: italic;
        margin: 2px 0;
      }
      .post-date {
        margin: 0 2px 0 auto;
      }
    </style>
  </body>
</html>
